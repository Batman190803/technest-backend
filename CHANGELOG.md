# üìù Changelog - TechNest Backend

## [2.1.0] - 2025-12-08 (–î—Ä—É–≥–∞ —á–∞—Å—Ç–∏–Ω–∞)

### ‚ú® –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–∫—Ç–∏–≤—ñ–≤

#### üìä AI —Ç–µ–ø–µ—Ä –∑–Ω–∞—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞!
- **–ü—Ä–æ–±–ª–µ–º–∞ 1:** AI –Ω–µ –º—ñ–≥ –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è "–°–∫—ñ–ª—å–∫–∏ —É –º–µ–Ω–µ –∞–∫—Ç–∏–≤—ñ–≤?"
- **–ü—Ä–æ–±–ª–µ–º–∞ 2:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –±–∞—á–∏–≤ –∑–∞–≥–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ —á–∞—Ç—ñ
- **–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ AI –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** AI —Ç–µ–ø–µ—Ä –∑–Ω–∞—î —Ç–æ—á–Ω—ñ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–∏ –∞–∫—Ç–∏–≤—ñ–≤, –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

### üÜï –î–æ–¥–∞–Ω–æ

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ AI –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ:
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∞–∫—Ç–∏–≤—ñ–≤
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑ –≤–∏—Ç—è–≥–Ω—É—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º
- –î–µ—Ç–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤—ñ–≤ –∑ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä–Ω–∏–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏, –º–æ–¥–µ–ª—è–º–∏, –∫—ñ–º–Ω–∞—Ç–∞–º–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI

#### API –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏:
```json
{
  "reply": "...",
  "stats": {
    "documentsTotal": 3,
    "documentsWithText": 1,
    "categoriesCount": 2,
    "assetsCount": 5
  },
  "hasAssetContext": false
}
```

### üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

- AI —Ç–µ–ø–µ—Ä –±–∞—á–∏—Ç—å —ñ –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –≤—Å—ñ –∞–∫—Ç–∏–≤–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –î–æ–¥–∞–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø—Ä–æ–º–ø—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- API —Ç–µ–ø–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É

### üìÅ –ù–æ–≤—ñ —Ñ–∞–π–ª–∏

- `–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø_–°–¢–ê–¢–ò–°–¢–ò–ö–ò.md` - –¥–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑–º—ñ–Ω

---

## [2.0.0] - 2025-12-08 (–ü–µ—Ä—à–∞ —á–∞—Å—Ç–∏–Ω–∞)

### ‚ú® –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

#### ÔøΩÔøΩ AI –ü–æ–º—ñ—á–Ω–∏–∫ —Ç–µ–ø–µ—Ä —á–∏—Ç–∞—î PDF –¥–æ–∫—É–º–µ–Ω—Ç–∏!
- **–ü—Ä–æ–±–ª–µ–º–∞:** AI –Ω–µ –º—ñ–≥ –Ω–∞–¥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤, –±–æ —Ç–µ–∫—Å—Ç –Ω–µ –≤–∏—Ç—è–≥—É–≤–∞–≤—Å—è
- **–†—ñ—à–µ–Ω–Ω—è:** –û–Ω–æ–≤–ª–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É PDF –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º pdf-parse v2
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** AI —Ç–µ–ø–µ—Ä –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ –∞–Ω–∞–ª—ñ–∑—É—î —Ç–µ—Ö–Ω—ñ—á–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

### üÜï –î–æ–¥–∞–Ω–æ

#### –ù–æ–≤—ñ API Endpoints:
1. `POST /api/documents/:documentId/reprocess` - –ø–µ—Ä–µ–æ–±—Ä–æ–±–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π PDF –¥–æ–∫—É–º–µ–Ω—Ç
2. `POST /api/documents/reprocess-all` - –ø–µ—Ä–µ–æ–±—Ä–æ–±–∏—Ç–∏ –≤—Å—ñ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. `GET /api/assets/:assetId/documents` - –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∞–∫—Ç–∏–≤—É
4. `GET /api/documents/:documentId` - –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –∑ —Ç–µ–∫—Å—Ç–æ–º
5. `DELETE /api/documents/:documentId` - –≤–∏–¥–∞–ª–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è AI —á–∞—Ç—É:
- –î–æ–¥–∞–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `assetId` –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫—Ç–∏–≤—É
- –ó–±—ñ–ª—å—à–µ–Ω–æ –ª—ñ–º—ñ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑ 5 –¥–æ 10
- –ó–±—ñ–ª—å—à–µ–Ω–æ preview —Ç–µ–∫—Å—Ç—É –∑ 2000 –¥–æ 3000 —Å–∏–º–≤–æ–ª—ñ–≤
- –î–æ–¥–∞–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–∫—Ç–∏–≤—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ü–æ–∫—Ä–∞—â–µ–Ω–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
- –î–æ–¥–∞–Ω–æ –º–µ—Ç–∞–¥–∞–Ω—ñ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (`documentsUsed`, `hasAssetContext`)

#### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤:
- –ü–æ—Å—Ç—ñ–π–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —É –ø–∞–ø—Ü—ñ `/documents/`
- –£–Ω—ñ–∫–∞–ª—å–Ω—ñ —ñ–º–µ–Ω–∞ —Ñ–∞–π–ª—ñ–≤: `{timestamp}-{userId}-{assetId}-{originalName}`
- –û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É —Ñ–∞–π–ª—É: 10MB
- –§—ñ–ª—å—Ç—Ä —Ç–∏–ø—ñ–≤ —Ñ–∞–π–ª—ñ–≤: PDF, JPEG, PNG, DOC, DOCX
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞/–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

#### PDF –ø–∞—Ä—Å–∏–Ω–≥:
- –û–Ω–æ–≤–ª–µ–Ω–æ `pdf-parse` –¥–æ –≤–µ—Ä—Å—ñ—ó 2.x
- –î–æ–¥–∞–Ω–æ `PDFParse` –∫–ª–∞—Å –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
- –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥—É
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ
- –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:
- –î–æ–¥–∞–Ω–æ –ø–æ–ª—è `filePath` —Ç–∞ `fileSize` –¥–æ –º–æ–¥–µ–ª—ñ `AssetDocument`
- –ó–º—ñ–Ω–µ–Ω–æ —Ç–∏–ø –ø–æ–ª—è `text` –Ω–∞ `@db.Text` –¥–ª—è –¥–æ–≤–≥–∏—Ö —Ç–µ–∫—Å—Ç—ñ–≤
- –î–æ–¥–∞–Ω–æ —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è `userId` —Ç–∞ `assetId`
- –î–æ–¥–∞–Ω–æ –∫–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è `onDelete: Cascade`

### üì¶ –ù–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```json
{
  "pdf2json": "^4.0.0",
  "pdfjs-dist": "^5.4.449",
  "pdfkit": "^0.15.0"  // –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
}
```

### üóÑÔ∏è –ó–º—ñ–Ω–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö

#### –ú–æ–¥–µ–ª—å `AssetDocument`:
```prisma
model AssetDocument {
  id        Int      @id @default(autoincrement())
  userId    Int
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  assetId   String
  fileName  String
  mimeType  String
  filePath  String?   // ‚úÖ –ù–æ–≤–æ–µ
  fileSize  Int?      // ‚úÖ –ù–æ–≤–æ–µ
  text      String?   @db.Text  // ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ —Ç–∏–ø
  createdAt DateTime @default(now())

  @@index([userId])   // ‚úÖ –ù–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å
  @@index([assetId])  // ‚úÖ –ù–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å
}
```

### üìÅ –ù–æ–≤—ñ —Ñ–∞–π–ª–∏

- `/documents/` - –ø–∞–ø–∫–∞ –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è PDF
- `check-docs.js` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —É –ë–î
- `reprocess-pdfs.js` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–æ–±—Ä–æ–±–∫–∏ —ñ—Å–Ω—É—é—á–∏—Ö PDF
- `test-extract.js` - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
- `–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_PDF.md` - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ –∑ PDF
- `CHANGELOG.md` - —Ü–µ–π —Ñ–∞–π–ª

### üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ

#### `.gitignore`:
```gitignore
# Uploaded documents and files
documents/
uploads/

# Database files
*.db
*.db-journal
```

### üöÄ –Ø–∫ –æ–Ω–æ–≤–∏—Ç–∏—Å—è

1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
   ```bash
   npm install
   ```

2. **–ü—Ä–∏–º—ñ–Ω—ñ—Ç—å –∑–º—ñ–Ω–∏ –ë–î:**
   ```bash
   npx prisma db push
   ```

3. **–ü–µ—Ä–µ–æ–±—Ä–æ–±—ñ—Ç—å —ñ—Å–Ω—É—é—á—ñ PDF:**
   ```bash
   # –ß–µ—Ä–µ–∑ API
   curl -X POST https://your-api.com/api/documents/reprocess-all \
     -H "Authorization: Bearer YOUR_TOKEN"

   # –ê–±–æ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ)
   node reprocess-pdfs.js
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   npm start
   ```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–º—ñ–Ω

- **–§–∞–π–ª—ñ–≤ –∑–º—ñ–Ω–µ–Ω–æ:** 8
- **–§–∞–π–ª—ñ–≤ –¥–æ–¥–∞–Ω–æ:** 6
- **–†—è–¥–∫—ñ–≤ –∫–æ–¥—É –¥–æ–¥–∞–Ω–æ:** ~500
- **–ù–æ–≤–∏—Ö API endpoints:** 5
- **–ü–æ–∫—Ä–∞—â–µ–Ω—å AI:** 7

### üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

1. **–°–∫–∞–Ω–æ–≤ÔøΩÔøΩÔøΩ–Ω—ñ PDF** - —Ç–µ–∫—Å—Ç –Ω–µ –≤–∏—Ç—è–≥—É—î—Ç—å—Å—è, –ø–æ—Ç—Ä—ñ–±–µ–Ω OCR
2. **–£–∫—Ä–∞—ó–Ω—Å—å–∫–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è** - –¥–µ—è–∫—ñ —Å–∏–º–≤–æ–ª–∏ –º–æ–∂—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ –≤ PDF –≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö PDFKit
3. **–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É** - –æ–±–º–µ–∂–µ–Ω–Ω—è 10MB –Ω–∞ —Ñ–∞–π–ª

### üîÆ –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –î–æ–¥–∞—Ç–∏ OCR –¥–ª—è —Å–∫–∞–Ω–æ–≤–∞–Ω–∏—Ö PDF (tesseract.js)
- [ ] –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å –∑ PDF
- [ ] –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ PDF
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –º—ñ–Ω—ñ–∞—Ç—é—Ä —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- [ ] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±—ñ–ª—å—à–µ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (DOCX, XLSX)
- [ ] –ü–æ—à—É–∫ –ø–æ —Ç–µ–∫—Å—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- [ ] –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

---

## [1.0.0] - –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–µ—Ä—Å—ñ—ó

### –ü–æ—á–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∑ 2FA
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–∫—Ç–∏–≤–∞–º–∏
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (–±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥—É)
- AI —á–∞—Ç (–±–µ–∑ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)
- Admin –ø–∞–Ω–µ–ª—å

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ä–æ–±–æ—Ç—É –∑ PDF –¥–∏–≤—ñ—Ç—å—Å—è [–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_PDF.md](./–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_PDF.md)
